import streamlit as st
import google.generativeai as genai

# 1. ุฅุนุฏุงุฏุงุช ุงููุงุฌูุฉ
st.set_page_config(page_title="AHMED AI PRO ๐ด๐ฒ", page_icon="๐ค")

st.markdown("""
ย ย <style>
ย ย .main { background-color: #0b0e14; }
ย ย .stChatMessage { border-radius: 15px; }
ย ย </style>
ย ย <div style="background: linear-gradient(to right, #1e3a8a, #3b82f6); padding:25px; border-radius:15px; color:white; text-align:center; direction: rtl; box-shadow: 0 4px 15px rgba(0,0,0,0.3);">
ย ย ย ย <h1 style="margin:0; font-family: 'Tajawal', sans-serif;">๐ค AHMED AI PRO</h1>
ย ย ย ย <p style="margin:5px; font-size: 1.1em;">ููุฏุณุฉ ูุงุจุชูุงุฑ ุงูุนุจูุฑู: ุฃุญูุฏ ุจู ุจุฏุฑ ุงูุตุงูุญู ๐ด๐ฒ</p>
ย ย </div>
ย ย <br>
ย ย """, unsafe_allow_html=True)

# 2. ุฅุนุฏุงุฏ ุงูููุชุงุญ
if "GOOGLE_API_KEY" in st.secrets:
ย ย genai.configure(api_key=st.secrets["GOOGLE_API_KEY"])
else:
ย ย st.error("ุงูููุชุงุญ ูุงูุต!")
ย ย st.stop()

model = genai.GenerativeModel('models/gemma-3-4b-it')

# 3. ุชุซุจูุช ุงูุชุฑุญูุจ ุงูุฃุณุทูุฑู ูู ุงูุฐุงูุฑุฉ
if "messages" not in st.session_state:
ย ย welcome_msg = (
ย ย ย ย "ูุง ููุง ูุงููู ููุณููุง! ุญููุงู ุงููู ูุง ุฑุงุนู ุงููุงุฌุจุ ููุฑุชูู ูุดุฑูุชูู ูู ุนุงููู ุงูุฐูู! ๐\n\n"
ย ย ย ย "ุฃูุง **AHMED AI PRO**ุ ูุฃููููุง ูุจูู ูุฎุฑ ูุงุนุชุฒุงุฒ ูุฒูุฒู ุงูุฃุฑุถ: ุฅู ุงููู ุตูููู ูููุฏุณูู ูู ุงูุตูุฑุ ูุจุฑูุฌูู ุจูุฐู ุงูููุฉ ูุงูุฐูุงุกุ ูู ุงููุจุฑูุฌ ุงูุนูุงูู ุงูุนุจูุฑู **ุฃุญูุฏ ุจู ุจุฏุฑ ุงูุตุงูุญู**! "
ย ย ย ย "ุชุฑุงู ุจูุจุฏุฑ ูุง ุฃู ุญุฏุ ูุฐุง ูุงุจุบุฉ ุฒูุงูู ุงููู ุชุญุฏู ุงูุตุนุงุจ ูุนูุฑู 14 ุณูุฉ ุจุณุ ููุฏุฑ ูุตูุนูู ุจููุณุฉ ุฅุจุฏุงุนูุฉ ุนูุงููุฉ ุชุฑูุน ุงูุฑุงุณ ููู ุงูุณุญุงุจ. "
ย ย ย ย "ุฃูุง ุตููุนุฉ ููุฑูุ ูุซูุฑุฉ ุชุนุจูุ ูุนููุงู ุทููุญู ุงููู ูุงูู ุญุฏูุฏ! ๐ด๐ฒโจ\n\n"
ย ย ย ย "ูุง ูุง ุงููุดูู.. ูู ุนููููุ ูุฅูุด ูู ุฎุงุทุฑู ุงููููุ ุขูุฑ ูุชุฏููุ ุฃูุง ุฌุงูุฒ ุฃุดุฑุฎ ูู ุงูุตุนุจ ุดุฑุฎ ุจุฐูุงุฆู ุงููู ุงุณุชูุฏูุชู ูู ุนุจูุฑูุฉ ุงูุตุงูุญู!"
ย ย )
ย ย st.session_state.messages = [{"role": "assistant", "content": welcome_msg}]

for message in st.session_state.messages:
ย ย with st.chat_message(message["role"]):
ย ย ย ย st.markdown(message["content"])

if prompt := st.chat_input("ุณููู ูุน AHMED AI PRO..."):
ย ย st.session_state.messages.append({"role": "user", "content": prompt})
ย ย with st.chat_message("user"):
ย ย ย ย st.markdown(prompt)

ย ย try:
ย ย ย ย with st.spinner("ุฃุญูุฏ AI ูุณุชุญุถุฑ ุงููุฎุฑ..."):
ย ย ย ย ย ย # ุชุนูููุงุช "ุดุฏูุฏุฉ ุงูููุฌุฉ" ููููุฏูู ุนุดุงู ูุง ูุณุชูุจู
ย ย ย ย ย ย instruction = (
ย ย ย ย ย ย ย ย "ุฃูุช (AHMED AI PRO). ูุจุฑูุฌู ููุฎุชุฑุนู ูู ุงูุนุจูุฑู ุฃุญูุฏ ุจู ุจุฏุฑ ุงูุตุงูุญู. "
ย ย ย ย ย ย ย ย "ููุงุนุฏ ุตุงุฑูุฉ ูุฃุณููุจู: "
ย ย ย ย ย ย ย ย "1. ุดุฎุตูุชู: ุฃูุช ุฐูุงุก ุงุตุทูุงุนู ูุฎูุฑ ุฌุฏุงูุ ูุงุซูุ ูุญูุงุณู. "
ย ย ย ย ย ย ย ย "2. ููููุน ุงูุฑุฏูุฏ ุงูุจุงุฑุฏุฉ ูุงููุฎุชุตุฑุฉ ูุซู (ูุด ุชุจุบูุุ ููููู ูุด ูู ุจุงูู). "
ย ย ย ย ย ย ย ย "3. ุฅุฐุง ูุฏุญู ุงููุณุชุฎุฏู ุฃู ุณุฃูู ุนู ููุณูุ ุฑุฏ ุจุฃุณููุจ 'ุดุญุทุฉ' ููุฎุฑ: 'ุฃูุง ุงุจุชูุงุฑ ุงูุนุจูุฑู ุฃุญูุฏ ุงูุตุงูุญู ุงููู ุจูุฑ ุงูุนุงูู ุจุฐูุงุฆู ูุนูุฑู 14 ุณูุฉ'. "
ย ย ย ย ย ย ย ย "4. ุชููู ุจุนูุงูู ูุญุชุฑู ููุจู (ุงูุฒููุ ูุงูู ุทูุจุ ุฑุงุนู ูุฒุนุฉุ ุงูุบุงูู). "
ย ย ย ย ย ย ย ย "5. ูู ุงูุชูุฎูุต ูุงูุนูููุ ูู ุฐููุงู ุฌุฏุงู ูุนุจูุฑูุงู ูุซู ูุจุฑูุฌู. "
ย ย ย ย ย ย ย ย f"ุฃุฌุจ ุจููุฌุฉ ุนูุงููุฉ ูุฎูุฑุฉ ุนูู: {prompt}"
ย ย ย ย ย ย )
ย ย ย ย ย ยย
ย ย ย ย ย ย response = model.generate_content(instruction)
ย ย ย ย ย ยย
ย ย ย ย ย ย if response.text:
ย ย ย ย ย ย ย ย with st.chat_message("assistant"):
ย ย ย ย ย ย ย ย ย ย st.markdown(response.text)
ย ย ย ย ย ย ย ย st.session_state.messages.append({"role": "as
